# é¡¹ç›®ç»“æ„å¿«é€Ÿå‚è€ƒ

## ğŸ“ ç›®å½•ç»“æ„é€Ÿè§ˆ

```
OfferHelper-Desktop/
â”œâ”€â”€ ğŸ“‚ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ ğŸ“‚ main/              # ä¸»è¿›ç¨‹ (Electron Main)
â”‚   â”œâ”€â”€ ğŸ“‚ renderer/          # æ¸²æŸ“è¿›ç¨‹ (React UI)
â”‚   â”œâ”€â”€ ğŸ“‚ shared/            # å…±äº«ä»£ç 
â”‚   â””â”€â”€ ğŸ“‚ preload/           # é¢„åŠ è½½è„šæœ¬
â”œâ”€â”€ ğŸ“‚ resources/             # é™æ€èµ„æº
â”œâ”€â”€ ğŸ“‚ build/                 # æ„å»ºé…ç½®
â”œâ”€â”€ ğŸ“‚ scripts/               # æ„å»ºè„šæœ¬
â”œâ”€â”€ ğŸ“‚ tests/                 # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ ğŸ“‚ docs/                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ ğŸ“‚ config/                # å·¥å…·é…ç½®
â””â”€â”€ ğŸ“‚ .github/               # CI/CD é…ç½®
```

## ğŸ¯ æ ¸å¿ƒæ¨¡å—

### ä¸»è¿›ç¨‹æ¨¡å— (src/main/)

```
main/
â”œâ”€â”€ main.ts                   # åº”ç”¨å…¥å£
â”œâ”€â”€ window/                   # çª—å£ç®¡ç†
â”‚   â”œâ”€â”€ WindowManager.ts     # çª—å£ç®¡ç†å™¨
â”‚   â””â”€â”€ WindowConfig.ts      # çª—å£é…ç½®
â”œâ”€â”€ privacy/                  # éšç§ä¿æŠ¤
â”‚   â”œâ”€â”€ PrivacyProtector.ts  # éšç§ä¿æŠ¤å™¨
â”‚   â””â”€â”€ ScreenDetector.ts    # å±å¹•æ£€æµ‹
â”œâ”€â”€ services/                 # ä¸»è¿›ç¨‹æœåŠ¡
â”‚   â”œâ”€â”€ UpdateService.ts     # æ›´æ–°æœåŠ¡
â”‚   â”œâ”€â”€ ConfigService.ts     # é…ç½®æœåŠ¡
â”‚   â””â”€â”€ DatabaseService.ts   # æ•°æ®åº“æœåŠ¡
â””â”€â”€ security/                 # å®‰å…¨æ¨¡å—
    â”œâ”€â”€ SecurityManager.ts   # å®‰å…¨ç®¡ç†å™¨
    â””â”€â”€ ProcessProtector.ts  # è¿›ç¨‹ä¿æŠ¤
```

### æ¸²æŸ“è¿›ç¨‹æ¨¡å— (src/renderer/)

```
renderer/
â”œâ”€â”€ App.tsx                   # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ components/               # UI ç»„ä»¶
â”‚   â”œâ”€â”€ common/              # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ layout/              # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ features/            # åŠŸèƒ½ç»„ä»¶
â”‚   â””â”€â”€ animations/          # åŠ¨ç”»ç»„ä»¶
â”œâ”€â”€ hooks/                    # è‡ªå®šä¹‰ Hooks
â”œâ”€â”€ services/                 # æ¸²æŸ“è¿›ç¨‹æœåŠ¡
â”œâ”€â”€ store/                    # çŠ¶æ€ç®¡ç†
â””â”€â”€ styles/                   # æ ·å¼æ–‡ä»¶
```

### å…±äº«æ¨¡å— (src/shared/)

```
shared/
â”œâ”€â”€ types/                    # ç±»å‹å®šä¹‰
â”œâ”€â”€ constants/                # å¸¸é‡å®šä¹‰
â”œâ”€â”€ utils/                    # å…±äº«å·¥å…·
â””â”€â”€ interfaces/               # æ¥å£å®šä¹‰
```

## ğŸ› ï¸ å¼€å‘å‘½ä»¤

### å¼€å‘ç¯å¢ƒ

```bash
npm run dev              # å¯åŠ¨å¼€å‘ç¯å¢ƒ
npm run dev:main         # åªå¯åŠ¨ä¸»è¿›ç¨‹å¼€å‘
npm run dev:renderer     # åªå¯åŠ¨æ¸²æŸ“è¿›ç¨‹å¼€å‘
```

### æ„å»ºæ‰“åŒ…

```bash
npm run build            # æ„å»ºæ‰€æœ‰ä»£ç 
npm run dist             # æ‰“åŒ…æ‰€æœ‰å¹³å°
npm run dist:mac         # æ‰“åŒ… macOS
npm run dist:win         # æ‰“åŒ… Windows
npm run dist:linux       # æ‰“åŒ… Linux
```

### æµ‹è¯•ç›¸å…³

```bash
npm test                 # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:watch       # ç›‘å¬æ¨¡å¼æµ‹è¯•
npm run test:coverage    # æµ‹è¯•è¦†ç›–ç‡
npm run test:e2e         # ç«¯åˆ°ç«¯æµ‹è¯•
```

### ä»£ç è´¨é‡

```bash
npm run lint             # ä»£ç æ£€æŸ¥
npm run lint:fix         # è‡ªåŠ¨ä¿®å¤
npm run format           # ä»£ç æ ¼å¼åŒ–
npm run type-check       # ç±»å‹æ£€æŸ¥
npm run security-check   # å®‰å…¨æ£€æŸ¥
```

## ğŸ“ å‘½åè§„èŒƒ

### æ–‡ä»¶å‘½å

- **ç»„ä»¶æ–‡ä»¶**: `PascalCase.tsx` (å¦‚ `WindowManager.tsx`)
- **å·¥å…·æ–‡ä»¶**: `camelCase.ts` (å¦‚ `userHelpers.ts`)
- **ç±»å‹æ–‡ä»¶**: `camelCase.ts` (å¦‚ `windowTypes.ts`)
- **æ ·å¼æ–‡ä»¶**: `kebab-case.css` (å¦‚ `main-window.css`)

### ä»£ç å‘½å

- **ç±»å**: `PascalCase` (å¦‚ `WindowManager`)
- **æ¥å£å**: `IPascalCase` (å¦‚ `IWindowManager`)
- **å‡½æ•°å**: `camelCase` (å¦‚ `createWindow`)
- **å˜é‡å**: `camelCase` (å¦‚ `currentUser`)
- **å¸¸é‡å**: `SCREAMING_SNAKE_CASE` (å¦‚ `MAX_RETRY_COUNT`)

## ğŸ”§ é…ç½®æ–‡ä»¶

### TypeScript é…ç½®

- `tsconfig.json` - TypeScript ç¼–è¯‘é…ç½®
- è·¯å¾„åˆ«å: `@/*` â†’ `src/*`

### ä»£ç è´¨é‡é…ç½®

- `eslint.config.js` - ESLint è§„åˆ™é…ç½®
- `prettier.config.js` - Prettier æ ¼å¼åŒ–é…ç½®
- `jest.config.js` - Jest æµ‹è¯•é…ç½®

### æ„å»ºé…ç½®

- `webpack.main.config.js` - ä¸»è¿›ç¨‹æ„å»ºé…ç½®
- `webpack.renderer.config.js` - æ¸²æŸ“è¿›ç¨‹æ„å»ºé…ç½®
- `electron-builder.json` - åº”ç”¨æ‰“åŒ…é…ç½®

## ğŸ¨ ç»„ä»¶ç»“æ„

### React ç»„ä»¶æ¨¡æ¿

```tsx
import React, { useState, useEffect, useCallback } from 'react';
import type { ComponentProps } from './types';

interface Props extends ComponentProps {
  title: string;
  onClose?: () => void;
}

const Component: React.FC<Props> = ({
  title,
  onClose
}) => {
  // 1. State hooks
  const [isVisible, setIsVisible] = useState(true);

  // 2. Effect hooks
  useEffect(() => {
    // å‰¯ä½œç”¨é€»è¾‘
  }, []);

  // 3. Event handlers
  const handleClose = useCallback(() => {
    onClose?.();
  }, [onClose]);

  // 4. Render helpers
  const renderContent = () => {
    return <div>Content</div>;
  };

  // 5. Main render
  return (
    <div className="component">
      {renderContent()}
    </div>
  );
};

export default Component;
```

### ç±»ç»„ä»¶æ¨¡æ¿

```typescript
class ServiceClass {
  // 1. Static properties
  private static instance: ServiceClass;

  // 2. Instance properties
  private config: Config;
  private isInitialized: boolean = false;

  // 3. Constructor
  constructor(config: Config) {
    this.config = config;
  }

  // 4. Static methods
  public static getInstance(): ServiceClass {
    if (!ServiceClass.instance) {
      ServiceClass.instance = new ServiceClass(defaultConfig);
    }
    return ServiceClass.instance;
  }

  // 5. Public methods
  public initialize(): void {
    // åˆå§‹åŒ–é€»è¾‘
  }

  // 6. Private methods
  private setupEventHandlers(): void {
    // ç§æœ‰æ–¹æ³•
  }
}
```

## ğŸ§ª æµ‹è¯•ç»“æ„

### å•å…ƒæµ‹è¯•

```typescript
// tests/unit/ComponentName.test.ts
describe('ComponentName', () => {
  beforeEach(() => {
    // æµ‹è¯•å‰å‡†å¤‡
  });

  afterEach(() => {
    // æµ‹è¯•åæ¸…ç†
  });

  describe('methodName', () => {
    it('should do something when condition', () => {
      // æµ‹è¯•é€»è¾‘
      expect(result).toBe(expected);
    });
  });
});
```

### E2E æµ‹è¯•

```typescript
// tests/e2e/workflow.spec.ts
test.describe('Main Workflow', () => {
  test('should complete user journey', async ({ page }) => {
    // æµ‹è¯•ç”¨æˆ·å®Œæ•´æµç¨‹
  });
});
```

## ğŸ”’ å®‰å…¨æ£€æŸ¥æ¸…å•

### è¾“å…¥éªŒè¯

- âœ… æ‰€æœ‰ç”¨æˆ·è¾“å…¥å¿…é¡»éªŒè¯
- âœ… ä½¿ç”¨ç™½åå•è€Œéé»‘åå•
- âœ… é™åˆ¶è¾“å…¥é•¿åº¦å’Œæ ¼å¼
- âœ… é˜²æ­¢ XSS å’Œæ³¨å…¥æ”»å‡»

### æ•°æ®ä¿æŠ¤

- âœ… æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- âœ… ä½¿ç”¨ HTTPS é€šä¿¡
- âœ… å®ç°æ•°æ®è„±æ•
- âœ… å®šæœŸæ¸…ç†ä¸´æ—¶æ•°æ®

### æƒé™æ§åˆ¶

- âœ… æœ€å°æƒé™åŸåˆ™
- âœ… ç¦ç”¨ä¸å¿…è¦çš„ Node.js é›†æˆ
- âœ… ä½¿ç”¨å†…å®¹å®‰å…¨ç­–ç•¥ (CSP)
- âœ… éªŒè¯æ‰€æœ‰ IPC é€šä¿¡

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å†…å­˜ç®¡ç†

```typescript
// âœ… åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
useEffect(() => {
  const handler = () => {};
  EventBus.on('event', handler);

  return () => {
    EventBus.off('event', handler);
  };
}, []);

// âœ… ä½¿ç”¨ WeakMap é¿å…å†…å­˜æ³„æ¼
const cache = new WeakMap();
```

### æ¸²æŸ“ä¼˜åŒ–

```typescript
// âœ… ä½¿ç”¨ React.memo
const Component = React.memo(({ data }) => {
  return <div>{data.name}</div>;
});

// âœ… ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—
const expensiveValue = useMemo(() => {
  return heavyCalculation(data);
}, [data]);

// âœ… ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°
const handleClick = useCallback(() => {
  onClick(id);
}, [id, onClick]);
```

## ğŸ› è°ƒè¯•æŠ€å·§

### ä¸»è¿›ç¨‹è°ƒè¯•

```bash
# å¯åŠ¨è°ƒè¯•æ¨¡å¼
npm run dev:main -- --inspect=9229

# VS Code è°ƒè¯•é…ç½®å·²åŒ…å«åœ¨ .vscode/launch.json
```

### æ¸²æŸ“è¿›ç¨‹è°ƒè¯•

```bash
# å¼€å¯å¼€å‘è€…å·¥å…·
Ctrl+Shift+I (Windows/Linux)
Cmd+Option+I (macOS)

# æˆ–åœ¨ä»£ç ä¸­æ‰“å¼€
webContents.openDevTools();
```

### æ—¥å¿—è°ƒè¯•

```typescript
// ä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—ç³»ç»Ÿ
import { logger } from '@/shared/utils/Logger';

logger.debug('è°ƒè¯•ä¿¡æ¯', { data });
logger.info('æ™®é€šä¿¡æ¯', { data });
logger.warn('è­¦å‘Šä¿¡æ¯', { data });
logger.error('é”™è¯¯ä¿¡æ¯', { error });
```

## ğŸš€ éƒ¨ç½²æµç¨‹

### æœ¬åœ°æ„å»º

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. è¿è¡Œæµ‹è¯•
npm test

# 3. å®‰å…¨æ£€æŸ¥
npm run security-check

# 4. æ„å»ºåº”ç”¨
npm run build

# 5. æ‰“åŒ…åˆ†å‘
npm run dist
```

### CI/CD æµç¨‹

```yaml
# GitHub Actions è‡ªåŠ¨åŒ–æµç¨‹
1. ä»£ç æ£€æŸ¥ (ESLint, Prettier)
2. ç±»å‹æ£€æŸ¥ (TypeScript)
3. å•å…ƒæµ‹è¯• (Jest)
4. E2E æµ‹è¯• (Playwright)
5. å®‰å…¨æ‰«æ (npm audit)
6. æ„å»ºæ‰“åŒ… (Electron Builder)
7. ä»£ç ç­¾å (macOS/Windows)
8. å‘å¸ƒåˆ†å‘ (GitHub Releases)
```

## ğŸ“‹ å¼€å‘æ£€æŸ¥æ¸…å•

### ä»£ç æäº¤å‰

- [ ] ä»£ç æ ¼å¼åŒ– (`npm run format`)
- [ ] ä»£ç æ£€æŸ¥é€šè¿‡ (`npm run lint`)
- [ ] ç±»å‹æ£€æŸ¥é€šè¿‡ (`npm run type-check`)
- [ ] å•å…ƒæµ‹è¯•é€šè¿‡ (`npm test`)
- [ ] å®‰å…¨æ£€æŸ¥é€šè¿‡ (`npm run security-check`)

### åŠŸèƒ½å¼€å‘å®Œæˆ

- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] æ·»åŠ é›†æˆæµ‹è¯•
- [ ] æ›´æ–°æ–‡æ¡£
- [ ] ä»£ç å®¡æŸ¥é€šè¿‡
- [ ] E2E æµ‹è¯•é€šè¿‡

### å‘å¸ƒå‰æ£€æŸ¥

- [ ] ç‰ˆæœ¬å·æ›´æ–°
- [ ] æ›´æ–°æ—¥å¿—å®Œå–„
- [ ] æ„å»ºæµ‹è¯•é€šè¿‡
- [ ] è·¨å¹³å°æµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### æ„å»ºé—®é¢˜

```bash
# æ¸…ç†ç¼“å­˜é‡æ–°æ„å»º
npm run clean
rm -rf node_modules
npm install
npm run build

# æ£€æŸ¥ä¾èµ–ç‰ˆæœ¬å†²çª
npm ls
npm audit
```

### å¼€å‘ç¯å¢ƒé—®é¢˜

```bash
# é‡ç½®å¼€å‘ç¯å¢ƒ
npm run clean
npm install
npm run dev

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000  # macOS/Linux
netstat -ano | findstr :3000  # Windows
```

### æ‰“åŒ…é—®é¢˜

```bash
# æ£€æŸ¥ Electron Builder é…ç½®
npm run dist -- --publish=never

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
DEBUG=electron-builder npm run dist
```

## ğŸ“š å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£

- [Electron å®˜æ–¹æ–‡æ¡£](https://www.electronjs.org/docs)
- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/docs/)

### æœ€ä½³å®è·µ

- [Electron å®‰å…¨æŒ‡å—](https://www.electronjs.org/docs/tutorial/security)
- [React æ€§èƒ½ä¼˜åŒ–](https://react.dev/learn/render-and-commit)
- [TypeScript æœ€ä½³å®è·µ](https://typescript-eslint.io/rules/)

### å·¥å…·é“¾

- [Webpack é…ç½®æŒ‡å—](https://webpack.js.org/configuration/)
- [Jest æµ‹è¯•æ¡†æ¶](https://jestjs.io/docs/getting-started)
- [Playwright E2E æµ‹è¯•](https://playwright.dev/docs/intro)

## ğŸ¤ å›¢é˜Ÿåä½œ

### Git å·¥ä½œæµ

```bash
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-feature

# æäº¤ä»£ç 
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"

# æ¨é€åˆ†æ”¯
git push origin feature/new-feature

# åˆ›å»º Pull Request
# ä»£ç å®¡æŸ¥é€šè¿‡ååˆå¹¶åˆ° develop åˆ†æ”¯
```

### ä»£ç å®¡æŸ¥è¦ç‚¹

- ä»£ç é€»è¾‘æ­£ç¡®æ€§
- æ€§èƒ½å½±å“è¯„ä¼°
- å®‰å…¨é£é™©æ£€æŸ¥
- æµ‹è¯•è¦†ç›–ç‡
- æ–‡æ¡£å®Œæ•´æ€§

### æ²Ÿé€šåä½œ

- ä½¿ç”¨ GitHub Issues è·Ÿè¸ªé—®é¢˜
- ä½¿ç”¨ GitHub Projects ç®¡ç†ä»»åŠ¡
- å®šæœŸè¿›è¡Œä»£ç å®¡æŸ¥
- ä¿æŒæ–‡æ¡£æ›´æ–°

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœåœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–å¸®åŠ©ï¼š

1. **æŸ¥çœ‹æ–‡æ¡£**: é¦–å…ˆæŸ¥çœ‹é¡¹ç›®æ–‡æ¡£å’Œç›¸å…³æŠ€æœ¯æ–‡æ¡£
2. **æœç´¢ Issues**: åœ¨ GitHub Issues ä¸­æœç´¢ç±»ä¼¼é—®é¢˜
3. **åˆ›å»º Issue**: å¦‚æœæ²¡æœ‰æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œåˆ›å»ºæ–°çš„ Issue
4. **å›¢é˜Ÿè®¨è®º**: åœ¨å›¢é˜Ÿç¾¤ç»„ä¸­è®¨è®ºæŠ€æœ¯é—®é¢˜
5. **ä»£ç å®¡æŸ¥**: é€šè¿‡ Pull Request è·å–åŒäº‹åé¦ˆ

**è®°ä½**: å¥½çš„ä»£ç ä¸ä»…è¦èƒ½è¿è¡Œï¼Œè¿˜è¦æ˜“äºç†è§£ã€ç»´æŠ¤å’Œæ‰©å±•ï¼ ğŸš€
