<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OfferHelper - å†å²è®°å½•ç•Œé¢åŸå‹</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #1a1a1a;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    .history-container {
      width: 700px;
      height: 600px;
      background: rgba(0, 0, 0, 0.92);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      box-shadow:
        0 20px 40px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(255, 255, 255, 0.05);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    /* æ ‡é¢˜æ  */
    .title-bar {
      height: 50px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      color: white;
    }

    .title-content {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .history-icon {
      font-size: 20px;
    }

    .history-title {
      font-size: 16px;
      font-weight: 600;
    }

    .title-actions {
      display: flex;
      gap: 8px;
    }

    .title-btn {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      border: none;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .title-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.05);
    }

    /* å·¥å…·æ  */
    .toolbar {
      padding: 16px 20px;
      background: rgba(255, 255, 255, 0.02);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .toolbar-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .filter-select {
      padding: 6px 12px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: #f3f4f6;
      font-size: 14px;
      cursor: pointer;
      outline: none;
    }

    .filter-select option {
      background: #2d2d2d;
      color: #f3f4f6;
    }

    .date-range {
      color: #9ca3af;
      font-size: 14px;
    }

    .toolbar-right {
      display: flex;
      gap: 8px;
    }

    .toolbar-btn {
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .toolbar-btn.primary {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
    }

    .toolbar-btn.secondary {
      background: rgba(255, 255, 255, 0.1);
      color: #d1d5db;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .toolbar-btn:hover {
      transform: translateY(-1px);
    }

    /* å†å²è®°å½•å†…å®¹ */
    .history-content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }

    .history-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .history-session {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.2s ease;
    }

    .history-session:hover {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(102, 126, 234, 0.3);
    }

    .session-header {
      padding: 16px 20px;
      background: rgba(255, 255, 255, 0.02);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
    }

    .session-info {
      flex: 1;
    }

    .session-title {
      color: #f3f4f6;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .session-meta {
      display: flex;
      align-items: center;
      gap: 16px;
      color: #9ca3af;
      font-size: 12px;
    }

    .session-stats {
      display: flex;
      align-items: center;
      gap: 12px;
      color: #9ca3af;
      font-size: 12px;
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .expand-icon {
      color: #9ca3af;
      transition: transform 0.2s ease;
    }

    .history-session.expanded .expand-icon {
      transform: rotate(180deg);
    }

    .session-content {
      display: none;
      padding: 0 20px 20px;
    }

    .history-session.expanded .session-content {
      display: block;
    }

    .qa-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .qa-item {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      padding: 16px;
      border-left: 3px solid #667eea;
    }

    .question {
      color: #f3f4f6;
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 8px;
      display: flex;
      align-items: flex-start;
      gap: 8px;
    }

    .question-icon {
      color: #667eea;
      font-size: 16px;
      margin-top: 2px;
    }

    .answer {
      color: #d1d5db;
      font-size: 14px;
      line-height: 1.5;
      margin-bottom: 12px;
      padding-left: 24px;
    }

    .qa-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-left: 24px;
    }

    .qa-info {
      display: flex;
      align-items: center;
      gap: 12px;
      color: #9ca3af;
      font-size: 11px;
    }

    .confidence-score {
      background: rgba(16, 185, 129, 0.2);
      color: #86efac;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 10px;
    }

    .qa-actions {
      display: flex;
      gap: 6px;
    }

    .qa-action-btn {
      width: 24px;
      height: 24px;
      border: none;
      background: rgba(255, 255, 255, 0.1);
      color: #9ca3af;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .qa-action-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      color: #f3f4f6;
    }

    /* ç©ºçŠ¶æ€ */
    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 300px;
      color: #6b7280;
      text-align: center;
    }

    .empty-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .empty-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .empty-description {
      font-size: 14px;
      line-height: 1.5;
    }

    /* ç»Ÿè®¡å¡ç‰‡ */
    .stats-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 12px;
      margin-bottom: 20px;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 16px;
      text-align: center;
    }

    .stat-number {
      color: #667eea;
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .stat-label {
      color: #9ca3af;
      font-size: 12px;
    }

    /* æ»šåŠ¨æ¡æ ·å¼ */
    .history-content::-webkit-scrollbar {
      width: 6px;
    }

    .history-content::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 3px;
    }

    .history-content::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 3px;
    }

    .history-content::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* å“åº”å¼è°ƒæ•´ */
    @media (max-width: 800px) {
      .history-container {
        width: 95%;
        height: 90vh;
      }

      .stats-cards {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>

<body>
  <div class="history-container">
    <!-- æ ‡é¢˜æ  -->
    <div class="title-bar">
      <div class="title-content">
        <div class="history-icon">ğŸ“œ</div>
        <span class="history-title">å†å²è®°å½•</span>
      </div>
      <div class="title-actions">
        <button class="title-btn" title="å¯¼å‡ºè®°å½•">ğŸ“¤</button>
        <button class="title-btn" title="æ¸…ç©ºå†å²">ğŸ—‘ï¸</button>
        <button class="title-btn" title="å…³é—­">Ã—</button>
      </div>
    </div>

    <!-- å·¥å…·æ  -->
    <div class="toolbar">
      <div class="toolbar-left">
        <select class="filter-select">
          <option value="all">å…¨éƒ¨è®°å½•</option>
          <option value="today">ä»Šå¤©</option>
          <option value="week">æœ¬å‘¨</option>
          <option value="month">æœ¬æœˆ</option>
        </select>
        <span class="date-range">æ˜¾ç¤ºæœ€è¿‘ 30 å¤©çš„è®°å½•</span>
      </div>
      <div class="toolbar-right">
        <button class="toolbar-btn secondary">æœç´¢</button>
        <button class="toolbar-btn primary">å¯¼å‡º</button>
      </div>
    </div>

    <!-- å†å²è®°å½•å†…å®¹ -->
    <div class="history-content">
      <!-- ç»Ÿè®¡å¡ç‰‡ -->
      <div class="stats-cards">
        <div class="stat-card">
          <div class="stat-number">15</div>
          <div class="stat-label">é¢è¯•åœºæ¬¡</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">127</div>
          <div class="stat-label">é—®é¢˜æ€»æ•°</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">89%</div>
          <div class="stat-label">å¹³å‡ç½®ä¿¡åº¦</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">2.3h</div>
          <div class="stat-label">æ€»ä½¿ç”¨æ—¶é•¿</div>
        </div>
      </div>

      <!-- å†å²è®°å½•åˆ—è¡¨ -->
      <div class="history-list">
        <!-- é¢è¯•è®°å½•1 -->
        <div class="history-session">
          <div class="session-header">
            <div class="session-info">
              <div class="session-title">å­—èŠ‚è·³åŠ¨ - å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆé¢è¯•</div>
              <div class="session-meta">
                <span>ğŸ“… 2024-01-15 14:30</span>
                <span>â±ï¸ 45åˆ†é’Ÿ</span>
                <span>ğŸ¢ å­—èŠ‚è·³åŠ¨</span>
              </div>
            </div>
            <div class="session-stats">
              <div class="stat-item">
                <span>â“</span>
                <span>8ä¸ªé—®é¢˜</span>
              </div>
              <div class="stat-item">
                <span>ğŸ“Š</span>
                <span>92%ç½®ä¿¡åº¦</span>
              </div>
              <span class="expand-icon">â–¼</span>
            </div>
          </div>
          <div class="session-content">
            <div class="qa-list">
              <div class="qa-item">
                <div class="question">
                  <span class="question-icon">â“</span>
                  è¯·ä»‹ç»ä¸€ä¸‹React Hooksçš„ä½¿ç”¨åœºæ™¯å’Œä¼˜åŠ¿ï¼Ÿ
                </div>
                <div class="answer">
                  React Hooksæ˜¯React 16.8å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œä¸»è¦ç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€å’Œå…¶ä»–Reactç‰¹æ€§ã€‚ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š1. æ›´ç®€æ´çš„ä»£ç ç»“æ„ï¼›2. æ›´å¥½çš„é€»è¾‘å¤ç”¨ï¼›3. æ›´å®¹æ˜“æµ‹è¯•ï¼›4.
                  é¿å…äº†classç»„ä»¶çš„å¤æ‚æ€§...
                </div>
                <div class="qa-meta">
                  <div class="qa-info">
                    <span>14:32</span>
                    <span class="confidence-score">95%</span>
                    <span>React, Hooks</span>
                  </div>
                  <div class="qa-actions">
                    <button class="qa-action-btn" title="å¤åˆ¶">ğŸ“‹</button>
                    <button class="qa-action-btn" title="æ”¶è—">â­</button>
                    <button class="qa-action-btn" title="ç¼–è¾‘">âœï¸</button>
                  </div>
                </div>
              </div>

              <div class="qa-item">
                <div class="question">
                  <span class="question-icon">â“</span>
                  å¦‚ä½•ä¼˜åŒ–Reactåº”ç”¨çš„æ€§èƒ½ï¼Ÿ
                </div>
                <div class="answer">
                  Reactæ€§èƒ½ä¼˜åŒ–ä¸»è¦ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å…¥æ‰‹ï¼š1. ä½¿ç”¨React.memoé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼›2. ä½¿ç”¨useMemoå’ŒuseCallbackç¼“å­˜è®¡ç®—ç»“æœå’Œå‡½æ•°ï¼›3. ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½ï¼›4.
                  è™šæ‹ŸåŒ–é•¿åˆ—è¡¨ï¼›5. ä¼˜åŒ–bundleå¤§å°...
                </div>
                <div class="qa-meta">
                  <div class="qa-info">
                    <span>14:38</span>
                    <span class="confidence-score">88%</span>
                    <span>React, æ€§èƒ½ä¼˜åŒ–</span>
                  </div>
                  <div class="qa-actions">
                    <button class="qa-action-btn" title="å¤åˆ¶">ğŸ“‹</button>
                    <button class="qa-action-btn" title="æ”¶è—">â­</button>
                    <button class="qa-action-btn" title="ç¼–è¾‘">âœï¸</button>
                  </div>
                </div>
              </div>

              <div class="qa-item">
                <div class="question">
                  <span class="question-icon">â“</span>
                  è¯´è¯´ä½ å¯¹TypeScriptçš„ç†è§£å’Œä½¿ç”¨ç»éªŒï¼Ÿ
                </div>
                <div class="answer">
                  TypeScriptæ˜¯JavaScriptçš„è¶…é›†ï¼Œæ·»åŠ äº†é™æ€ç±»å‹æ£€æŸ¥ã€‚ä¸»è¦ä¼˜åŠ¿ï¼š1. ç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥ï¼›2. æ›´å¥½çš„IDEæ”¯æŒï¼›3. ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§æå‡ï¼›4.
                  é‡æ„æ›´å®‰å…¨ã€‚åœ¨é¡¹ç›®ä¸­ä¸»è¦ç”¨äºæ¥å£å®šä¹‰ã€ç±»å‹çº¦æŸå’Œé”™è¯¯é¢„é˜²...
                </div>
                <div class="qa-meta">
                  <div class="qa-info">
                    <span>14:45</span>
                    <span class="confidence-score">91%</span>
                    <span>TypeScript, ç±»å‹ç³»ç»Ÿ</span>
                  </div>
                  <div class="qa-actions">
                    <button class="qa-action-btn" title="å¤åˆ¶">ğŸ“‹</button>
                    <button class="qa-action-btn" title="æ”¶è—">â­</button>
                    <button class="qa-action-btn" title="ç¼–è¾‘">âœï¸</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- é¢è¯•è®°å½•2 -->
        <div class="history-session">
          <div class="session-header">
            <div class="session-info">
              <div class="session-title">è…¾è®¯ - é«˜çº§å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆé¢è¯•</div>
              <div class="session-meta">
                <span>ğŸ“… 2024-01-12 10:00</span>
                <span>â±ï¸ 60åˆ†é’Ÿ</span>
                <span>ğŸ¢ è…¾è®¯</span>
              </div>
            </div>
            <div class="session-stats">
              <div class="stat-item">
                <span>â“</span>
                <span>12ä¸ªé—®é¢˜</span>
              </div>
              <div class="stat-item">
                <span>ğŸ“Š</span>
                <span>87%ç½®ä¿¡åº¦</span>
              </div>
              <span class="expand-icon">â–¼</span>
            </div>
          </div>
          <div class="session-content">
            <div class="qa-list">
              <div class="qa-item">
                <div class="question">
                  <span class="question-icon">â“</span>
                  è¯·è®¾è®¡ä¸€ä¸ªå‰ç«¯ç›‘æ§ç³»ç»Ÿçš„æ¶æ„ï¼Ÿ
                </div>
                <div class="answer">
                  å‰ç«¯ç›‘æ§ç³»ç»Ÿä¸»è¦åŒ…æ‹¬ï¼š1. æ•°æ®æ”¶é›†å±‚ï¼ˆé”™è¯¯ç›‘æ§ã€æ€§èƒ½ç›‘æ§ã€ç”¨æˆ·è¡Œä¸ºç›‘æ§ï¼‰ï¼›2. æ•°æ®ä¼ è¾“å±‚ï¼ˆæ•°æ®ä¸ŠæŠ¥ã€æ‰¹é‡å‘é€ã€å¤±è´¥é‡è¯•ï¼‰ï¼›3. æ•°æ®å¤„ç†å±‚ï¼ˆæ•°æ®æ¸…æ´—ã€èšåˆåˆ†æï¼‰ï¼›4.
                  æ•°æ®å±•ç¤ºå±‚ï¼ˆDashboardã€å‘Šè­¦ç³»ç»Ÿï¼‰...
                </div>
                <div class="qa-meta">
                  <div class="qa-info">
                    <span>10:15</span>
                    <span class="confidence-score">85%</span>
                    <span>ç³»ç»Ÿè®¾è®¡, ç›‘æ§</span>
                  </div>
                  <div class="qa-actions">
                    <button class="qa-action-btn" title="å¤åˆ¶">ğŸ“‹</button>
                    <button class="qa-action-btn" title="æ”¶è—">â­</button>
                    <button class="qa-action-btn" title="ç¼–è¾‘">âœï¸</button>
                  </div>
                </div>
              </div>

              <div class="qa-item">
                <div class="question">
                  <span class="question-icon">â“</span>
                  å¦‚ä½•å®ç°ä¸€ä¸ªé«˜æ€§èƒ½çš„è™šæ‹Ÿæ»šåŠ¨ç»„ä»¶ï¼Ÿ
                </div>
                <div class="answer">
                  è™šæ‹Ÿæ»šåŠ¨çš„æ ¸å¿ƒæ€æƒ³æ˜¯åªæ¸²æŸ“å¯è§†åŒºåŸŸçš„å…ƒç´ ã€‚å®ç°è¦ç‚¹ï¼š1. è®¡ç®—å¯è§†åŒºåŸŸçš„èµ·å§‹å’Œç»“æŸç´¢å¼•ï¼›2. åŠ¨æ€åˆ›å»ºå’Œé”€æ¯DOMå…ƒç´ ï¼›3. ä½¿ç”¨transformæˆ–positionå®šä½å…ƒç´ ï¼›4.
                  ç›‘å¬æ»šåŠ¨äº‹ä»¶å¹¶èŠ‚æµå¤„ç†ï¼›5. å¤„ç†ä¸ç­‰é«˜å…ƒç´ çš„æƒ…å†µ...
                </div>
                <div class="qa-meta">
                  <div class="qa-info">
                    <span>10:28</span>
                    <span class="confidence-score">89%</span>
                    <span>è™šæ‹Ÿæ»šåŠ¨, æ€§èƒ½ä¼˜åŒ–</span>
                  </div>
                  <div class="qa-actions">
                    <button class="qa-action-btn" title="å¤åˆ¶">ğŸ“‹</button>
                    <button class="qa-action-btn" title="æ”¶è—">â­</button>
                    <button class="qa-action-btn" title="ç¼–è¾‘">âœï¸</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- é¢è¯•è®°å½•3 -->
        <div class="history-session">
          <div class="session-header">
            <div class="session-info">
              <div class="session-title">é˜¿é‡Œå·´å·´ - å‰ç«¯æŠ€æœ¯ä¸“å®¶é¢è¯•</div>
              <div class="session-meta">
                <span>ğŸ“… 2024-01-10 16:00</span>
                <span>â±ï¸ 50åˆ†é’Ÿ</span>
                <span>ğŸ¢ é˜¿é‡Œå·´å·´</span>
              </div>
            </div>
            <div class="session-stats">
              <div class="stat-item">
                <span>â“</span>
                <span>10ä¸ªé—®é¢˜</span>
              </div>
              <div class="stat-item">
                <span>ğŸ“Š</span>
                <span>93%ç½®ä¿¡åº¦</span>
              </div>
              <span class="expand-icon">â–¼</span>
            </div>
          </div>
          <div class="session-content">
            <div class="qa-list">
              <div class="qa-item">
                <div class="question">
                  <span class="question-icon">â“</span>
                  è°ˆè°ˆä½ å¯¹å¾®å‰ç«¯æ¶æ„çš„ç†è§£å’Œå®è·µï¼Ÿ
                </div>
                <div class="answer">
                  å¾®å‰ç«¯æ˜¯å°†å‰ç«¯åº”ç”¨åˆ†è§£ä¸ºå¤šä¸ªç‹¬ç«‹çš„ã€å¯éƒ¨ç½²çš„å¾®åº”ç”¨çš„æ¶æ„æ¨¡å¼ã€‚ä¸»è¦ä¼˜åŠ¿ï¼š1. æŠ€æœ¯æ ˆæ— å…³ï¼›2. ç‹¬ç«‹å¼€å‘éƒ¨ç½²ï¼›3. å›¢é˜Ÿè‡ªæ²»ï¼›4.
                  å¢é‡å‡çº§ã€‚å®ç°æ–¹æ¡ˆåŒ…æ‹¬ï¼šsingle-spaã€qiankunã€Module Federationç­‰...
                </div>
                <div class="qa-meta">
                  <div class="qa-info">
                    <span>16:12</span>
                    <span class="confidence-score">94%</span>
                    <span>å¾®å‰ç«¯, æ¶æ„è®¾è®¡</span>
                  </div>
                  <div class="qa-actions">
                    <button class="qa-action-btn" title="å¤åˆ¶">ğŸ“‹</button>
                    <button class="qa-action-btn" title="æ”¶è—">â­</button>
                    <button class="qa-action-btn" title="ç¼–è¾‘">âœï¸</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // å†å²è®°å½•ç•Œé¢äº¤äº’é€»è¾‘
    document.addEventListener('DOMContentLoaded', function ()
    {
      // é¢è¯•è®°å½•å±•å¼€/æ”¶èµ·
      const sessionHeaders = document.querySelectorAll('.session-header')
      sessionHeaders.forEach(header =>
      {
        header.addEventListener('click', function ()
        {
          const session = this.closest('.history-session')
          session.classList.toggle('expanded')
        })
      })

      // ç­›é€‰åŠŸèƒ½
      const filterSelect = document.querySelector('.filter-select')
      filterSelect.addEventListener('change', function ()
      {
        const filterValue = this.value
        console.log('ç­›é€‰æ¡ä»¶:', filterValue)
        filterSessions(filterValue)
      })

      // QAæ“ä½œæŒ‰é’®
      const qaActionBtns = document.querySelectorAll('.qa-action-btn')
      qaActionBtns.forEach(btn =>
      {
        btn.addEventListener('click', function (e)
        {
          e.stopPropagation()
          const action = this.getAttribute('title')
          console.log('QAæ“ä½œ:', action)

          if (action === 'å¤åˆ¶') {
            const qaItem = this.closest('.qa-item')
            const question = qaItem.querySelector('.question').textContent.trim()
            const answer = qaItem.querySelector('.answer').textContent.trim()
            const content = `é—®é¢˜ï¼š${question}\n\nå›ç­”ï¼š${answer}`

            navigator.clipboard.writeText(content).then(() =>
            {
              this.textContent = 'âœ“'
              setTimeout(() =>
              {
                this.textContent = 'ğŸ“‹'
              }, 2000)
            })
          } else if (action === 'æ”¶è—') {
            this.style.color = this.style.color === 'gold' ? '#9ca3af' : 'gold'
          }
        })
      })

      // æ ‡é¢˜æ æŒ‰é’®
      const titleBtns = document.querySelectorAll('.title-btn')
      titleBtns.forEach(btn =>
      {
        btn.addEventListener('click', function ()
        {
          const action = this.getAttribute('title')
          console.log('æ ‡é¢˜æ æ“ä½œ:', action)

          if (action === 'å¯¼å‡ºè®°å½•') {
            exportHistory()
          } else if (action === 'æ¸…ç©ºå†å²') {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚')) {
              clearHistory()
            }
          } else if (action === 'å…³é—­') {
            console.log('å…³é—­å†å²è®°å½•')
          }
        })
      })

      // å·¥å…·æ æŒ‰é’®
      const toolbarBtns = document.querySelectorAll('.toolbar-btn')
      toolbarBtns.forEach(btn =>
      {
        btn.addEventListener('click', function ()
        {
          const action = this.textContent.trim()
          console.log('å·¥å…·æ æ“ä½œ:', action)

          if (action === 'æœç´¢') {
            showSearchDialog()
          } else if (action === 'å¯¼å‡º') {
            exportHistory()
          }
        })
      })

      // ç­›é€‰é¢è¯•è®°å½•
      function filterSessions (filter)
      {
        const sessions = document.querySelectorAll('.history-session')
        const now = new Date()

        sessions.forEach(session =>
        {
          const dateText = session.querySelector('.session-meta span').textContent
          const sessionDate = new Date(dateText.replace('ğŸ“… ', ''))
          let shouldShow = true

          switch (filter) {
            case 'today':
              shouldShow = sessionDate.toDateString() === now.toDateString()
              break
            case 'week':
              const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000)
              shouldShow = sessionDate >= weekAgo
              break
            case 'month':
              const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000)
              shouldShow = sessionDate >= monthAgo
              break
            default:
              shouldShow = true
          }

          session.style.display = shouldShow ? 'block' : 'none'
        })

        // æ›´æ–°æ—¥æœŸèŒƒå›´æ˜¾ç¤º
        const dateRange = document.querySelector('.date-range')
        const rangeTexts = {
          'all': 'æ˜¾ç¤ºæ‰€æœ‰è®°å½•',
          'today': 'æ˜¾ç¤ºä»Šå¤©çš„è®°å½•',
          'week': 'æ˜¾ç¤ºæœ€è¿‘ 7 å¤©çš„è®°å½•',
          'month': 'æ˜¾ç¤ºæœ€è¿‘ 30 å¤©çš„è®°å½•'
        }
        dateRange.textContent = rangeTexts[filter] || 'æ˜¾ç¤ºæ‰€æœ‰è®°å½•'
      }

      // å¯¼å‡ºå†å²è®°å½•
      function exportHistory ()
      {
        const sessions = document.querySelectorAll('.history-session')
        let exportData = '# OfferHelper é¢è¯•å†å²è®°å½•\n\n'

        sessions.forEach(session =>
        {
          const title = session.querySelector('.session-title').textContent
          const meta = session.querySelector('.session-meta').textContent
          exportData += `## ${title}\n${meta}\n\n`

          const qaItems = session.querySelectorAll('.qa-item')
          qaItems.forEach((qa, index) =>
          {
            const question = qa.querySelector('.question').textContent.replace('â“', '').trim()
            const answer = qa.querySelector('.answer').textContent.trim()
            exportData += `### é—®é¢˜ ${index + 1}\n**Q:** ${question}\n\n**A:** ${answer}\n\n`
          })

          exportData += '---\n\n'
        })

        // åˆ›å»ºä¸‹è½½é“¾æ¥
        const blob = new Blob([exportData], { type: 'text/markdown' })
        const url = URL.createObjectURL(blob)
        const a = document.createElement('a')
        a.href = url
        a.download = `é¢è¯•å†å²è®°å½•_${new Date().toISOString().split('T')[0]}.md`
        a.click()
        URL.revokeObjectURL(url)

        console.log('å†å²è®°å½•å·²å¯¼å‡º')
      }

      // æ¸…ç©ºå†å²è®°å½•
      function clearHistory ()
      {
        const historyList = document.querySelector('.history-list')
        const statsCards = document.querySelectorAll('.stat-number')

        // æ¸…ç©ºåˆ—è¡¨
        historyList.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">ğŸ“</div>
            <div class="empty-title">æš‚æ— å†å²è®°å½•</div>
            <div class="empty-description">å¼€å§‹ä½ çš„ç¬¬ä¸€æ¬¡é¢è¯•ï¼Œè®°å½•å°†ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
          </div>
        `

        // é‡ç½®ç»Ÿè®¡æ•°æ®
        statsCards[0].textContent = '0'
        statsCards[1].textContent = '0'
        statsCards[2].textContent = '0%'
        statsCards[3].textContent = '0h'

        console.log('å†å²è®°å½•å·²æ¸…ç©º')
      }

      // æ˜¾ç¤ºæœç´¢å¯¹è¯æ¡†
      function showSearchDialog ()
      {
        const query = prompt('è¯·è¾“å…¥æœç´¢å…³é”®è¯ï¼š')
        if (query) {
          searchHistory(query)
        }
      }

      // æœç´¢å†å²è®°å½•
      function searchHistory (query)
      {
        const sessions = document.querySelectorAll('.history-session')
        const searchTerm = query.toLowerCase()

        sessions.forEach(session =>
        {
          const title = session.querySelector('.session-title').textContent.toLowerCase()
          const qaItems = session.querySelectorAll('.qa-item')
          let hasMatch = title.includes(searchTerm)

          if (!hasMatch) {
            qaItems.forEach(qa =>
            {
              const question = qa.querySelector('.question').textContent.toLowerCase()
              const answer = qa.querySelector('.answer').textContent.toLowerCase()
              if (question.includes(searchTerm) || answer.includes(searchTerm)) {
                hasMatch = true
              }
            })
          }

          session.style.display = hasMatch ? 'block' : 'none'
        })

        console.log('æœç´¢å®Œæˆ:', query)
      }
    });
  </script>
</body>

</html>